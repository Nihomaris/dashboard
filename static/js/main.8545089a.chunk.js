(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{208:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"PROJECT_WEBSITE",function(){return E}),n.d(a,"PROJECT_OTHER",function(){return O}),n.d(a,"dashboard",function(){return C});var o=n(0),r=n.n(o),c=n(33),i=n.n(c),s=n(2),l=n(15),m=n(74),u=n(75),d=(n(87),n(48)),p=n(34),f="GET_PROJECTS",j="ADD_COMMENT",h="MOVE_PROJECT",b="TOGGLE_COMMENT_WINDOW",v=n(76),g=n.n(v),y={apiProjects:null,sortProjects:null,commentWindow:null},E="website",O="other";function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f:return Object(p.a)({},e,{apiProjects:t.payload,sortProjects:e.sortProjects?N(e,t.payload):t.payload});case j:return Object(p.a)({},e,{sortProjects:w(e,t.payload)});case h:var n=t.payload,a=n.dragIndex,o=n.hoverIndex,r=n.dragProject;return g()(e,{sortProjects:{$splice:[[a,1],[o,0,r]]}});case b:return Object(p.a)({},e,{commentWindow:t.payload});default:return e}}function w(e,t){var n=e.sortProjects,a=Object(d.a)(n);return n.map(function(e,n){e.id===t.id&&a.splice(n,1,t)}),a}function N(e,t){var n=e.sortProjects,a=Object(d.a)(t),o=[];return n.map(function(e){return a.map(function(t,n){return t.id===e.id&&o.push(a.splice(n,1)[0]),!1}),!1}),a.length&&a.map(function(e){return o.push(e)}),o}var P=n(3),W=n(4),k=n(7),D=n(5),T=n(6),x=n(77),_=n.n(x),I=n(20),S=(n(208),"https://novaweb.studio/"),M={url:S+"dashboard/_api/projects/?format=json",method:"GET"},J=S+"dashboard/_api/projects/",R="PATCH",F=n(9);var V=function(e){function t(e){var n;return Object(P.a)(this,t),(n=Object(k.a)(this,Object(D.a)(t).call(this,e))).state={comment:""},n.updateInputVal=n.updateInputVal.bind(Object(F.a)(Object(F.a)(n))),n.sendComment=n.sendComment.bind(Object(F.a)(Object(F.a)(n))),n}return Object(T.a)(t,e),Object(W.a)(t,[{key:"updateInputVal",value:function(e){this.setState({comment:e.target.value})}},{key:"sendComment",value:function(){var e=this.props,t=e.project,n=e.addComment,a=e.closeFn;this.state.comment&&(n({id:t.id,comment:{comment:this.state.comment}}),a(null))}},{key:"render",value:function(){var e=this.props,t=e.project,n=e.closeFn;return r.a.createElement("div",{className:"project_comment_container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"alert alert-success project_comment"},r.a.createElement("span",null,t.comment))))),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",onChange:this.updateInputVal,className:"form-control"})),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-append",style:{marginLeft:"auto"}},r.a.createElement("button",{onClick:this.sendComment,className:"btn btn-outline-secondary",type:"button"},"Send"),r.a.createElement("button",{onClick:n,className:"btn btn-outline-secondary",type:"button"},"Close"))))}}]),t}(o.Component),B="project",G={hover:function(e,t,n){if(!n)return null;var a=t.getItem().index,o=e.index;if(a!==o){var r=Object(c.findDOMNode)(n).getBoundingClientRect(),i=(r.bottom-r.top)/2,s=t.getClientOffset().y-r.top;a<o&&s<i||a>o&&s>i||(e.moveCard(a,o),t.getItem().index=o)}}};var A=function(e){function t(){return Object(P.a)(this,t),Object(k.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(W.a)(t,[{key:"openCommentWindow",value:function(){var e=this.props,t=e.project,n=e.commentWindow,a=e.toggleCommentWindow;n&&t.id===n.id?a(null):a(t)}},{key:"render",value:function(){var e=this.props,t=(e.id,e.type),n=e.title,a=(e.comment,e.result),o=e.project,c=e.itemtype,i=e.commentWindow,s=this.props,l=(s.text,s.isDragging?0:1);return(0,s.connectDragSource)((0,s.connectDropTarget)(r.a.createElement("section",{className:"project",style:{opacity:l}},r.a.createElement("div",{className:"container project_info"},r.a.createElement("div",{className:"row align-items-center",style:{height:"100%"}},r.a.createElement("div",{className:"col-4"},r.a.createElement("span",null,t||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",r.a.createElement("br",null),r.a.createElement("strong",null,n||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"))),r.a.createElement("div",{className:"col-4"},r.a.createElement("span",null,"status:",r.a.createElement("br",null),r.a.createElement("strong",null,function(e,t){switch(t){case E:return"string"===typeof e?e:"200";case O:return e?"ON":"OFF";default:return"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"}}(a,c)))),r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{onClick:this.openCommentWindow.bind(this),className:"btn btn-success"},"write")))),i&&i.id===o.id&&r.a.createElement(L,{data:this.props}))))}}]),t}(o.Component);function L(e){var t=e.data,n=t.project,a=t.toggleCommentWindow,o=t.addComment;return r.a.createElement(V,{closeFn:a,project:n,addComment:o})}var H=Object(I.DropTarget)(B,G,function(e){return{connectDropTarget:e.dropTarget()}})(A),$=H=Object(I.DragSource)(B,{beginDrag:function(e){return e.toggleCommentWindow(null),{id:e.id,index:e.index}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(H),q=function(e){function t(){return Object(P.a)(this,t),Object(k.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(W.a)(t,[{key:"moveCard",value:function(e,t){var n=this.props.projects[e];this.props.moveProject({dragIndex:e,hoverIndex:t,dragProject:n})}},{key:"render",value:function(){var e=this,t=this.props.projects,n=this.props,a=n.itemtype,o=n.toggleCommentWindow,c=n.commentWindow,i=n.addComment;return r.a.createElement("section",{className:"dashboard"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-sm col-md-4"},r.a.createElement("article",{className:"dashboard__container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-12"},t&&t.map(function(t,n){return function(e,t,n,a,o,c,i){if(e.type===t)return r.a.createElement($,{itemtype:t,project:e,key:e.id,index:i,id:e.id,type:e.type,title:e.title,comment:e.comment,result:e.result,moveCard:c,toggleCommentWindow:n,commentWindow:a,addComment:o})}(t,a,o,c,i,e.moveCard.bind(e),n)})||r.a.createElement("h3",{style:{color:"black",textAlign:"center"}},"Loading")))))))))}}]),t}(o.Component);var z=Object(l.b)(function(e){return{projects:e.dashboard.sortProjects,commentWindow:e.dashboard.commentWindow}},function(e){return{addComment:function(t){e(function(e){return function(t){fetch(J+e.id,{method:R,headers:{"content-type":"application/json"},body:JSON.stringify(e.comment)}).then(function(e){return e.json()}).then(function(e){t({type:j,payload:e})}).catch(function(e){console.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439")})}}(t))},moveProject:function(t){e(function(e){return function(t){t({type:h,payload:e})}}(t))},toggleCommentWindow:function(t){e(function(e){return function(t){t({type:b,payload:e})}}(t))}}})(q),K=function(e){function t(){return Object(P.a)(this,t),Object(k.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getProjects(),setInterval(function(){e.props.getProjects()},1e4)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(z,{itemtype:E}),r.a.createElement(z,{itemtype:O}))}}]),t}(o.Component),Q=Object(l.b)(function(e){return{}},function(e){return{getProjects:function(){e(function(e){fetch(M.url,{method:M.method,headers:{"content-type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e({type:f,payload:t})}).catch(function(e){console.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432")})})}}})(Object(I.DragDropContext)(_.a)(K));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=Object(s.createStore)(Object(s.combineReducers)(a),Object(u.composeWithDevTools)(Object(s.applyMiddleware)(m.a)));i.a.render(r.a.createElement(l.a,{store:U},r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},78:function(e,t,n){e.exports=n(210)},87:function(e,t,n){}},[[78,2,1]]]);
//# sourceMappingURL=main.8545089a.chunk.js.map