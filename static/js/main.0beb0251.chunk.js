(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{208:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"PROJECT_WEBSITE",function(){return E}),n.d(o,"PROJECT_OTHER",function(){return O}),n.d(o,"dashboard",function(){return w});var a=n(0),r=n.n(a),c=n(34),i=n.n(c),s=n(2),l=n(15),m=n(74),u=n(75),d=(n(87),n(21)),p=n(35),h="GET_PROJECTS",b="ADD_COMMENT",f="MOVE_PROJECT",j="TOGGLE_COMMENT_WINDOW",y=n(76),v=n.n(y),g={apiProjects:null,sortProjects:null,commentWindow:null},E="website",O="other";function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case h:return Object(p.a)({},e,{apiProjects:t.payload,sortProjects:e.sortProjects?N(e,t.payload):t.payload});case b:return Object(p.a)({},e,{sortProjects:C(e,t.payload)});case f:var n=t.payload,o=n.dragIndex,a=n.hoverIndex,r=n.dragProject;return v()(e,{sortProjects:{$splice:[[o,1],[a,0,r]]}});case j:return Object(p.a)({},e,{commentWindow:t.payload});default:return e}}function C(e,t){var n=e.sortProjects,o=Object(d.a)(n);return n.map(function(e,n){e.id===t.id&&o.splice(n,1,t)}),o}function N(e,t){var n=e.sortProjects,o=Object(d.a)(t),a=[];return n.map(function(e){return o.map(function(t,n){return t.id===e.id&&a.push(o.splice(n,1)[0]),!1}),!1}),o.length&&o.map(function(e){return a.push(e)}),a}var k=n(3),T=n(4),_=n(7),P=n(5),W=n(6),D=n(77),x=n.n(D),S=n(20),I=(n(208),"https://novaweb.studio/"),M=I+"dashboard/_api/projects/",A="PATCH",B=[{id:3,title:"test",type:"other",comment:"4",result:!1,last_check:"2019-01-18T18:56:26.380867+03:00"},{id:0,title:"Google",type:"website",comment:"1",result:!0,last_check:"2019-01-18T18:56:26.519109+03:00"},{id:2,title:"GitHub",type:"other",comment:"3",result:!0,last_check:"2019-01-18T18:56:26.922697+03:00"},{id:1,title:"YouTube",type:"website",comment:"2",result:!0,last_check:"2019-01-18T18:36:20.461361+03:00"},{id:4,title:"test",type:"website",comment:"5",result:"AssertionError('Status code 504',)",last_check:"2019-01-18T18:50:26.155261+03:00"},{id:5,title:"test",type:"website",comment:"123",result:"AssertionError('Status code 504',)",last_check:"2019-01-18T18:51:26.178532+03:00"},{id:6,title:"VKontakte",type:"website",comment:"Maybe yes ?",result:"AssertionError('Status code 504',)",last_check:"2019-01-18T18:52:26.198924+03:00"},{id:7,title:"Bad news for you",type:"other",comment:"No",result:!1,last_check:"2019-01-18T18:53:26.222046+03:00"},{id:9,title:"Bad news for you",type:"other",comment:"No",result:!1,last_check:"2019-01-18T18:54:26.268325+03:00"},{id:8,title:"Bad news for you",type:"other",comment:"No",result:!1,last_check:"2019-01-18T18:55:26.331538+03:00"}],J=n(9);var R=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(_.a)(this,Object(P.a)(t).call(this,e))).state={comment:""},n.updateInputVal=n.updateInputVal.bind(Object(J.a)(Object(J.a)(n))),n.sendComment=n.sendComment.bind(Object(J.a)(Object(J.a)(n))),n}return Object(W.a)(t,e),Object(T.a)(t,[{key:"updateInputVal",value:function(e){this.setState({comment:e.target.value})}},{key:"sendComment",value:function(){var e=this.props,t=e.project,n=e.addComment,o=e.closeFn;this.state.comment&&(n({id:t.id,comment:{comment:this.state.comment}}),o(null))}},{key:"render",value:function(){var e=this.props,t=e.project,n=e.closeFn;return r.a.createElement("div",{className:"project_comment_container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"alert alert-success project_comment"},r.a.createElement("span",null,t.comment))))),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",onChange:this.updateInputVal,className:"form-control"})),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-append",style:{marginLeft:"auto"}},r.a.createElement("button",{onClick:this.sendComment,className:"btn btn-outline-secondary",type:"button"},"Send"),r.a.createElement("button",{onClick:n,className:"btn btn-outline-secondary",type:"button"},"Close"))))}}]),t}(a.Component),V="project",F={hover:function(e,t,n){if(!n)return null;var o=t.getItem().index,a=e.index;if(o!==a){var r=Object(c.findDOMNode)(n).getBoundingClientRect(),i=(r.bottom-r.top)/2,s=t.getClientOffset().y-r.top;o<a&&s<i||o>a&&s>i||(e.moveCard(o,a),t.getItem().index=a)}}};var G=function(e){function t(){return Object(k.a)(this,t),Object(_.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(T.a)(t,[{key:"openCommentWindow",value:function(){var e=this.props,t=e.project,n=e.commentWindow,o=e.toggleCommentWindow;n&&t.id===n.id?o(null):o(t)}},{key:"render",value:function(){var e=this.props,t=(e.id,e.type),n=e.title,o=(e.comment,e.result),a=e.project,c=e.itemtype,i=e.commentWindow,s=this.props,l=(s.text,s.isDragging?0:1);return(0,s.connectDragSource)((0,s.connectDropTarget)(r.a.createElement("section",{className:"project",style:{opacity:l}},r.a.createElement("div",{className:"container project_info"},r.a.createElement("div",{className:"row align-items-center",style:{height:"100%"}},r.a.createElement("div",{className:"col-4"},r.a.createElement("span",null,t||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",r.a.createElement("br",null),r.a.createElement("strong",null,n||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"))),r.a.createElement("div",{className:"col-4"},r.a.createElement("span",null,"status:",r.a.createElement("br",null),r.a.createElement("strong",null,function(e,t){switch(t){case E:return"string"===typeof e?e:"200";case O:return e?"ON":"OFF";default:return"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"}}(o,c)))),r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{onClick:this.openCommentWindow.bind(this),className:"btn btn-success"},"write")))),i&&i.id===a.id&&r.a.createElement(H,{data:this.props}))))}}]),t}(a.Component);function H(e){var t=e.data,n=t.project,o=t.toggleCommentWindow,a=t.addComment;return r.a.createElement(R,{closeFn:o,project:n,addComment:a})}var L=Object(S.DropTarget)(V,F,function(e){return{connectDropTarget:e.dropTarget()}})(G),$=L=Object(S.DragSource)(V,{beginDrag:function(e){return e.toggleCommentWindow(null),{id:e.id,index:e.index}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(L),K=function(e){function t(){return Object(k.a)(this,t),Object(_.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(T.a)(t,[{key:"moveCard",value:function(e,t){var n=this.props.projects[e];this.props.moveProject({dragIndex:e,hoverIndex:t,dragProject:n})}},{key:"render",value:function(){var e=this,t=this.props.projects,n=this.props,o=n.itemtype,a=n.toggleCommentWindow,c=n.commentWindow,i=n.addComment;return r.a.createElement("section",{className:"dashboard"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-sm col-md-4"},r.a.createElement("article",{className:"dashboard__container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-12"},t&&t.map(function(t,n){return function(e,t,n,o,a,c,i){if(e.type===t)return r.a.createElement($,{itemtype:t,project:e,key:e.id,index:i,id:e.id,type:e.type,title:e.title,comment:e.comment,result:e.result,moveCard:c,toggleCommentWindow:n,commentWindow:o,addComment:a})}(t,o,a,c,i,e.moveCard.bind(e),n)})||r.a.createElement("h3",{style:{color:"black",textAlign:"center"}},"Loading")))))))))}}]),t}(a.Component);var Y=Object(l.b)(function(e){return{projects:e.dashboard.sortProjects,commentWindow:e.dashboard.commentWindow}},function(e){return{addComment:function(t){e(function(e){return function(t){fetch(M+e.id,{method:A,headers:{"content-type":"application/json"},body:JSON.stringify(e.comment)}).then(function(e){return e.json()}).then(function(e){t({type:b,payload:e})}).catch(function(e){console.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439")})}}(t))},moveProject:function(t){e(function(e){return function(t){t({type:f,payload:e})}}(t))},toggleCommentWindow:function(t){e(function(e){return function(t){t({type:j,payload:e})}}(t))}}})(K),q=function(e){function t(){return Object(k.a)(this,t),Object(_.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getProjects(),setTimeout(function(){e.props.getProjects()},5e3)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Y,{itemtype:E}),r.a.createElement(Y,{itemtype:O}))}}]),t}(a.Component),z=Object(l.b)(function(e){return{}},function(e){return{getProjects:function(){e(function(e){var t=Object(d.a)(B),n=t.length;B.push({id:n++,title:"She",type:"website",comment:"5",result:"AssertionError('Status code 5004',)",last_check:"2019-01-18T18:50:26.155261+03:00"}),console.log(n),e({type:h,payload:t})})}}})(Object(S.DragDropContext)(x.a)(q));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=Object(s.createStore)(Object(s.combineReducers)(o),Object(u.composeWithDevTools)(Object(s.applyMiddleware)(m.a)));i.a.render(r.a.createElement(l.a,{store:Q},r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},78:function(e,t,n){e.exports=n(210)},87:function(e,t,n){}},[[78,2,1]]]);
//# sourceMappingURL=main.0beb0251.chunk.js.map